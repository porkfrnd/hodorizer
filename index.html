<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HODOR TRANSLATOR ‚Äì REAL VOICE EDITION üö™</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Creepster&family=UnifrakturCook:wght@700&display=swap');

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom, #1a1a2e, #16213e);
      color: #e0e0ff;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      font-family: 'Creepster', cursive;
      color: #c71585;
      text-shadow: 0 0 20px #ff1493;
      margin: 20px 0 10px;
      font-size: 3rem;
    }
    .container {
      background: rgba(30, 30, 60, 0.95);
      border: 5px solid #6a5acd;
      border-radius: 16px;
      padding: 30px;
      width: 100%;
      max-width: 740px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.8);
    }
    textarea, #output {
      width: 100%;
      min-height: 140px;
      padding: 16px;
      margin: 12px 0;
      border: 3px solid #6a5acd;
      border-radius: 12px;
      font-size: 18px;
      resize: vertical;
      background: #0f0f23;
      color: #f0f0ff;
      font-family: monospace;
    }
    #output {
      background: #1e1e3f;
      min-height: 170px;
      white-space: pre-wrap;
      font-size: 1.35rem;
      line-height: 1.7;
      cursor: pointer;
    }
    button {
      background: #c71585;
      color: white;
      border: none;
      padding: 14px 28px;
      font-size: 17px;
      border-radius: 10px;
      cursor: pointer;
      margin: 8px 6px;
      transition: all 0.3s;
    }
    button:hover { background: #ff1493; transform: scale(1.08); }
    .speak-btn { background: #4b0082; }
    .speak-btn:hover { background: #8a2be2; }
    .alive { animation: hodorShake 0.35s infinite alternate; }
    @keyframes hodorShake {
      from { transform: translateX(-4px) rotate(-3deg); }
      to { transform: translateX(4px) rotate(3deg); }
    }
    .info {
      font-size: 0.95em;
      color: #aaa;
      margin-top: 20px;
      text-align: center;
      font-style: italic;
    }
    .highlight { color: #ff1493; font-size: 1.5rem; text-shadow: 0 0 10px #ff69b4; }
  </style>
</head>
<body>
  <h1>HODOR TRANSLATOR</h1>
  <div class="container">
    <p><strong>English side ‚Üí</strong> Type anything (auto-translates live):</p>
    <textarea id="input" placeholder="Hello from Kathmandu... What does Hodor say?"></textarea>

    <div style="text-align:center; margin:15px 0;">
      <button onclick="speakEnglish()">üîä Speak English (AI)</button>
      <button onclick="hodorize()">Force Hodorize</button>
    </div>

    <p><strong>Hodor side ‚Üí</strong> REAL voice from the show (click to hear):</p>
    <div id="output">Hodor...</div>

    <div style="text-align:center; margin-top:15px;">
      <button class="speak-btn" onclick="speakHodor()">üó£Ô∏è HODOR SPEAK! (real clips)</button>
    </div>

    <div class="info">
      Real Kristian Nairn voice clips ‚Ä¢ Auto-updates like Google Translate<br>
      Hold the door. Hodor holds the door. Hodor.
    </div>
  </div>

  <script>
    // === REAL HODOR VOICE CLIPS (direct from public soundboards) ===
    const hodorClips = [
      "https://www.myinstants.com/media/sounds/hodor.mp3",           // classic Hodor
      "https://www.myinstants.com/media/sounds/hodor_1.mp3",         // simple Hodor
      "https://www.myinstants.com/media/sounds/hodor-abertura-tok.mp3", // long/excited
      "https://www.myinstants.com/media/sounds/untitled_240.mp3"     // dramatic Game of Hodor
    ];

    // === DETERMINISTIC TRANSLATION ===
    function simpleHash(str) {
      let hash = 0;
      for (let i = 0; i < str.length; i++) {
        hash = (hash * 31 + str.charCodeAt(i)) | 0;
      }
      return Math.abs(hash);
    }

    function hodorize() {
      const input = document.getElementById('input').value.trim();
      if (!input) {
        document.getElementById('output').textContent = "Hodor?";
        return;
      }

      const words = input.split(/\s+/);
      const bases = ["Hodor", "hodor", "Hodooor", "HOdor", "HODOR", "hooodor", "Hod-or", "Hoooodor"];
      const puncts = ["", "!", "?", "...", ",", "!!"];

      const result = words.map(word => {
        if (!/[a-zA-Z]/.test(word)) return word;

        const len = word.length;
        const hash = simpleHash(word.toLowerCase());

        let base = len <= 3 ? "Hod" : len <= 6 ? "Hodor" : len <= 10 ? "Hodooor" : "Hoooooodor";
        let variant = bases[hash % bases.length] || base;

        if ((hash % 7) < 3) variant += puncts[hash % puncts.length];
        if ((hash % 3) === 0) variant = variant.toUpperCase();
        else if ((hash % 3) === 1) variant = variant.toLowerCase();

        return variant;
      }).join(" ");

      const outputEl = document.getElementById('output');
      outputEl.textContent = result || "Hodor...";
      outputEl.classList.add('alive');
      setTimeout(() => outputEl.classList.remove('alive'), 900);
    }

    // === AUTO TRANSLATE (Google Translate style) ===
    let debounceTimer;
    const inputEl = document.getElementById('input');
    inputEl.addEventListener('input', () => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(hodorize, 420);
    });

    // === REAL HODOR SPEAK (plays actual clips sequentially) ===
    async function speakHodor() {
      const text = document.getElementById('output').textContent.trim();
      if (!text || text === "Hodor...") return;

      const hodorWords = text.split(/\s+/);
      const outputEl = document.getElementById('output');
      let originalHTML = outputEl.innerHTML;

      for (let i = 0; i < hodorWords.length; i++) {
        const word = hodorWords[i];
        if (!word) continue;

        // Pick real clip using deterministic hash (same text = same voice every time)
        const hash = simpleHash(word + i);
        const clipUrl = hodorClips[hash % hodorClips.length];

        const audio = new Audio(clipUrl);
        audio.playbackRate = 0.92 + (hash % 25) / 80; // tiny natural variation

        // Highlight current word
        outputEl.innerHTML = hodorWords.map((w, idx) =>
          idx === i ? `<span class="highlight">${w}</span>` : w
        ).join(" ");

        audio.play();

        // Wait until this clip almost finishes before next
        await new Promise(resolve => {
          audio.onended = resolve;
          setTimeout(resolve, 1200); // safety timeout
        });
      }

      // Reset
      outputEl.innerHTML = originalHTML;
    }

    // English AI voice (unchanged, only for input)
    function speakEnglish() {
      const text = document.getElementById('input').value.trim();
      if (!text) return;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.rate = 0.95;
      utterance.pitch = 1.05;
      speechSynthesis.speak(utterance);
    }

    // Click output to speak Hodor
    document.getElementById('output').addEventListener('click', speakHodor);

    // Initial auto-translate if there's placeholder text
    setTimeout(hodorize, 600);
  </script>
</body>
</html>
